\chapter{组织你的文本}

从这一章开始，我们将要深入 \LaTeX 编辑的各个方面，首先来看\LaTeX 文档中文本的编辑和组织，在探究中，我们会从一个一个空格、一个标点开始分析，但深入细节的同时也不要忘记整个文档的结构和组织性，要见树木更见森林。

\section{文字与符号}

\subsection{字斟句酌}

简单正文的输入没有太多特别之处，\TeX 传统上使用扩展 ASCII 字符集，较新的\TeX 引擎使用 UTF-8 编码。在接受的字符集之内，除了个别特殊符号，大部分字符可以直接录入。

\subsubsection{从字母表到单词}

在 \LaTeX 中可以从标准键盘上直接打出 26 个字母的大小写形式。当然，从字母表到单词只有一步之遥，即用空格和标点把字母分开。但事实上总免不了要遇到一些稀奇古怪的词汇或人名，试试输入下面的词：
\begin{center}
    café \quad Gödel \quad Antonín Dvořák \quad Øster Vrå \quad Kιrkağaç
\end{center}

或者这些：
\begin{center}
    χαïδεύηζ \quad КpЮковa
\end{center}

上面的例子中，前一组词是来自拉丁字母，但明显增加了许多符号；后一组则是希腊语词汇和俄语人名。我们常用的字母表包括扩展的拉丁字母、希腊字母和西里尔字母（ Cyrillic alphabet ），这比标准键盘上所能直接输入的 52 个字母要多得多。不过不用担心，数以万计的汉字我们也搞定了，区区几个字母也不在话下。

解决输入超过 ASCII 码范围的字母的问题有传统和现代两类方案，先来看一下现代的方案。

现代的方案就是使用 UTF-8 编码直接输入。在 XeTeX 这样的排版引擎下， UTF-8 编码是原生的，不需要任何多余的设置：

\begin{minipage}[t]{0.45\textwidth}
    \begin{lstlisting}
    % UTF-8 编码
    café \quad Gödel \quad Antonín Dvořák

    χαïδεύηζ \quad КpЮковa
    \end{lstlisting}
\end{minipage}
\hfill
\begin{minipage}[t]{0.45\textwidth}
    \vspace{0.1cm}
    \hspace{0.5cm}

    café \quad Gödel \quad Antonín Dvořák

    χαïδεύηζ \quad КpЮковa
\end{minipage}

不过，要想正确输入、显示并输出所有这些符号，仍然不是一件简单的事。

输入特殊的字母需要计算机键盘布局或输入法的支持，例如在法语键盘中（一般可以在操作系统中设置），标准键盘 7 8 9 0 位置上的字符分别是 \verb|è _ ç à| ，这种键盘布局对需要大量录入法语的人来说特别有用。如果不方便使用特殊键盘来设置，操作系统或编辑器往往还提供了“字符映射表”一类的程序或插件，可以用鼠标选取一些字符输入；中文输入法的软键盘也可以用来输入一小部分特殊的外文字母。

显示 ASCII 以外的字母表需要编辑器使用的字体的支持。大部分西文字体都支持扩展拉丁字母，如 è 、ç ，但不是所有字体都有希腊字母和西里尔字母，即使是一些罕用的拉丁字母（如 ř 也有可能缺失。编辑器常用的等宽字体中， Windows 和 Mac 系统都预装的 Courier New ， Windows 下的 Consolas 、 Lucida Sans Typewriter 等都能显示上面所列的所有字母， Linux 下常用的 Bitstream Vera Sans Mono 、 Inconsolata 则只支持到扩展拉丁字母，因此配置编辑器时也需要仔细选择。

最后但却最重要的是， \TeX 系统输出时所使用的字体，也必须要能直接显示这些字母。 \LaTeX 默认的 Computer Modern 在一个字体中只覆盖很小的字符集， XeLaTeX 下默认的 Latin Modern 字体要好得多，一般都支持到拉丁字母（这通常就足够了），但希腊、西里尔这些字体需要更换其他字体。要完整显示其他语言的字母，就必须频繁地更换不同的字体，或在 \TeX 中使用覆盖更大字符集的字体。比如为了能正确显示前面例子中的三种字母，我们在前面已经设置了 Windows 系统预装的 Times New Roman 字体。

而传统的解决方案是使用特殊的命令，给字母加上重音的标记，使用特殊字母或者整体更换字母表。

所谓重音（ accents ），是指加在字母上的标记，实际包括抑音符、锐音符、抑扬符等等多种符号。 \LaTeX 支持的重音标记及其命令见表\ref{tab:zhongyin}，命令名称大多取象形的符号。将重音加之于普通的拉丁字母上，可以得到一大批扩展的拉丁字母。

\begin{table}[H]
    \centering
    \caption{\LaTeX 中的重音命令，以字母 o 为例}
    \label{tab:zhongyin}
    \begin{tabular}{ccccccccccc}
        \toprule
        \`o & \verb|\`o| 
        & \qquad &
        \'o & \verb|\'o| 
        & \qquad &
        \^o & \verb|\^o| 
        & \qquad &
        \"o & \verb|\"o| \\
        \~o & \verb|\~o| 
        & \qquad &
        \=o & \verb|\=o| 
        & \qquad &
        \.o & \verb|\.o| 
        & \qquad &
        \u{o} & \verb|\u{o}| \\
        \v{o} & \verb|\v{o}| 
        & \qquad &
        \H{o} & \verb|\H{o}| 
        & \qquad &
        \t{oo} & \verb|\t{oo}| 
        & \qquad &
        \r{o} & \verb|\r{o}| \\
        \c{o} & \verb|\c{o}| 
        & \qquad &
        \d{o} & \verb|\d{o}| 
        & \qquad &
        \b{o} & \verb|\b{o}| 
        & \qquad &
         &  \\
    \bottomrule
    \end{tabular}
\end{table}

使用命令可以输入的 \LaTeX 字母，见表\ref{tab:special}。其中，\i ， \j 就是字母 i ， j ，只是在加上重音命令时需要去掉上面的点。 \ij,\IJ,\SS 是字母连写，在默认的字体中没有区别。

\begin{table}[H]
    \centering
    \caption{\LaTeX 中的特殊字母}
    \label{tab:special}
    \begin{tabular}{ccccccccccc}
        \toprule
        \AA & \verb|\AA| 
        & \qquad &
        \aa & \verb|\aa| 
        & \qquad &
        \AE & \verb|\AE| 
        & \qquad &
        \ae & \verb|\ae| \\
        \OE & \verb|\OE| 
        & \qquad &
        \oe & \verb|\oe| 
        & \qquad &
        \SS & \verb|\SS| 
        & \qquad &
        \ss & \verb|\ss| \\
        \IJ & \verb|\IJ| 
        & \qquad &
        \ij & \verb|\ij| 
        & \qquad &
        \L & \verb|\L| 
        & \qquad &
        \l & \verb|\l| \\
        \O & \verb|\O| 
        & \qquad &
        \o & \verb|\o| 
        & \qquad &
        \i & \verb|\i| 
        & \qquad &
        \j & \verb|\j| \\
    \bottomrule
    \end{tabular}
\end{table}

如果还要输入希腊字母和西里尔字母，默认的字体就不够用了，需要更换其他编码和字体。为此，\LaTeX 提供了 babel 宏包，可以方便地同时访问多种语言的字母表。 babel 宏包可带有一个或多个语言的可选参数，支持不同的语言，如
\begin{lstlisting}
    \usepackage[greek,english]{babel}
\end{lstlisting}
将使用英语和希腊语，其中作为最后一个参数的英语是默认语言，此时希腊语就可以用 ASCII 字符代替：
\begin{lstlisting}
    \textgreek{abcde}
\end{lstlisting}
上述代码输出 αβζδε 。需要少量俄文的西里尔字母，可以换用 OT2 编码的字体德奥。

例如：

\begin{minipage}[t]{0.45\textwidth}
    \begin{lstlisting}
% 导言区 \usepackage[OT2,OT1]{fontenc}
{\fontencoding{OT2} \selectfont ABCabc}
    \end{lstlisting}
\end{minipage}
\hfill
\begin{minipage}[t]{0.45\textwidth}
    \vspace{0.1cm}
    \hspace{0.5cm}
    {\fontencoding{OT2} \selectfont ABCabc}
\end{minipage}
如果排版全文是俄文的文章，也可以用 \verb|russian| 参数使用 \verb|babel| 宏包，不过输入时就不使用 ASCII 码，而使用俄文专用的编码。由于这些语言很少用，这里不做更多说明。

使用 pdfTeX 这样的传统排版引擎也可以使用 UTF-8 编码输入文字，此时需要使用 inputenc 宏包并选用 \verb|utf8| 选项，它会将 UTF-8 的输入编码自动转换为当前字体编码所对应的符号，字体编码的设置仍然与原来一样，如：
\begin{lstlisting}
    % coding: utf-8
    % pdflatex 命令编译
    \documentclass{article}
    \usepackage[OT2,OT1]{fontenc}
    \usepackage[utf8]{inputenc}
    \begin{document}
    café \quad Gödel
    {\fontencoding{OT2} \selectfont КpЮковa}
    \end{document}
\end{lstlisting}

\LaTeX 在排版中会将单词中的一些字母连写成为一个符号，即连字 （ ligature ）。连字的有无和多少一般是由使用的字体决定的，在默认的 Computer Modern 和 Latin Modern 字体中，小写字母组合 \verb|ff,fi,fl,ffi,ffl| 都有连字：

\begin{minipage}[t]{0.45\textwidth}
    \begin{lstlisting}
    differ find flight difficult ruffle 
    \end{lstlisting}
\end{minipage}
\hfill
\begin{minipage}[c]{0.45\textwidth}
    \hspace{0.5cm}
    \includegraphics[width=0.6\textwidth]{连字1.png}
\end{minipage}

本书中主要使用的 Times 字体则只有 \verb|fi| 和 \verb|fl| 的连字 （ fi,fl），而一些专业字体可能用的更多：

\includegraphics[width=0.3\textwidth]{连字2.png}

偶尔出于意义或美观的考虑，需要取消连字。此时可以借用\verb|\/|命令。

\begin{minipage}[t]{0.45\textwidth}
    \begin{lstlisting}
    fleet f\/leet
    \end{lstlisting}
\end{minipage}
\hfill
\begin{minipage}[b]{0.45\textwidth}
    \hspace{0.5cm}

    fleet f\/leet
\end{minipage}

使用 XeLaTeX 引擎， OpenType 字体时，可以方便地使用 fontspec 宏包的 \verb|Ligature| 字体选项选择连字的有无和程度。

在键盘上，可以直接使用的符号有 16 种：

, \quad . \quad ; \quad : \quad ! \quad ? \quad ` \quad ' \quad ( \quad ) \quad [ \quad ] \quad - \quad /  \quad * \quad @

标点\ ,\ .\ ;\ :\ !\ ?\ 用来分隔句子或部分句子，在每个标点之后应该加上空格，以保证正确的距离和换行。在特殊情况下，这些标点有空格还有一些更微妙的关系。

引号在 \LaTeX 中用 \verb|`|和 \verb|'| 两个符号表示。单引号就用一遍，双引号用两遍。如果遇到单引号和双引号连续出现的情形，则在中间用 \verb|\,|命令分开：

\begin{minipage}[t]{0.45\textwidth}
    \begin{lstlisting}
    ``\,`A' or `B?' \,'' he asked.
    \end{lstlisting}
\end{minipage}
\hfill
\begin{minipage}[t]{0.45\textwidth}
    \vspace{0.1cm}
    \hspace{0.5cm}
    ``\,`A' or `B?' \,'' he asked.
\end{minipage}
这里\verb|\,| 命令产生很小的间距，注意\LaTeX 并不会忽略以符号命名的宏前后的空格，所以在它前后都不要加多余的空格。符号\verb|'| 同时也是表示所有格和省字的撇号 （ apostrophe ，如 ``It's Knuth's book'' ）。

引号和括号通常要在前后加空格分割单词。逗号、句号等标点何时放在引号和括号内，何时放在引号和括号外，可参见英文写作的格式指导。

除了在数学模式中表示减号，符号 - 在\LaTeX 正文中也有多种用途：单独使用时它是连字符（ hyphen ）；两个连用（ -- ），是 en dash ，用来表示数字范围；三个连用 （ --- ），是 em dash ，即破折号：

\begin{minipage}[t]{0.45\textwidth}
    \begin{lstlisting}
        
    An inter-word dash or , hyphen, as in X-ray.

    A medium dash for number ranges, like 1--2.

    A punctuation dash --- like this.
    \end{lstlisting}
\end{minipage}
\hfill
\begin{minipage}[t]{0.45\textwidth}
    \vspace{0.1cm}
    \hspace{0.5cm}

    An inter-word dash or , hyphen, as in X-ray.

    A medium dash for number ranges, like 1--2.

    A punctuation dash --- like this.
\end{minipage}

不过，按中文写作习惯，表示数字范围也常使用符号 $\sim$ (\verb|$\sim$|) ，有时也用汉字的全角破折号或半个汉字破折号。

西文的省略号（ ellipsis ）使用\verb|\ldots| 或 \verb|\dots| 命令产生，相比直接输入三个句号，它所拉开的距离要合理些：

\begin{minipage}[t]{0.45\textwidth}
    \begin{lstlisting}
    Good: One, two, three \ldots

    Bad: One, two, three...
    \end{lstlisting}
\end{minipage}
\hfill
\begin{minipage}[t]{0.45\textwidth}
    \vspace{0.1cm}
    \hspace{0.5cm}

    Good: One, two, three \ldots

    Bad: One, two, three...
\end{minipage}

\verb|\ldots| 和 \verb|\dots| 命令在正文中是等价的，它们会在每个点后面增加一个小的间距，因而直接在 \verb|\ldots| 后面再加逗号、句号、叹号等标号，也能得到正确的间距。西文省略号的用法在不同的格式手册中往往有详细规定，通常在句中使用时，前后都要加空格，而在句末使用则应该使用 4 个点。这是因为 \verb|\ldots| 的后面也有间距，所以使用\verb|H\ldots.| 能得到正确的 “ H\ldots. ”，但直接使用 \verb|H \ldots\ H| 却将得到错误的间距 “ H \ldots\ H ”（后一个间距比前面大 ）。解决的办法是把省略号放进数学模式：

\begin{minipage}[t]{0.45\textwidth}
    \begin{lstlisting}
    She $\ldots$ she got it.

    I've no idea\ldots.
    \end{lstlisting}
\end{minipage}
\hfill
\begin{minipage}[t]{0.45\textwidth}
    \vspace{0.1cm}
    \hspace{0.5cm}

    She $\ldots$ she got it.

    I've no idea\ldots.
\end{minipage}

标准键盘上不能直接录入的标点符号有10个，它们占据了主键盘上面一大排的一大半：

\~{} \quad \# \quad \$ \quad \% \quad \^{} \quad \& \quad \{ \quad \} \quad \_ \quad \textbackslash 

他们都有特殊作用，其中的许多我们已经熟知：数学模式符号 \$ 、注释符号 \% 、上标 \^{} 、分组 \{\} 、宏命令 \textbackslash，只有个别例外：

\begin{minipage}[t]{0.45\textwidth}
    \begin{lstlisting}[language = java]
    \~{} \quad \# \quad \$ \quad \% 
    \quad \^{} \quad \& \quad \{ \quad \} 
    \quad \_ \quad \textbackslash 
    \end{lstlisting}
\end{minipage}
\hfill
\begin{minipage}[t]{0.45\textwidth}
    \vspace{0.1cm}
    \hspace{0.5cm}

    \~{} \quad \# \quad \$ \quad \% \quad \^{} \quad \& \quad \{ \quad \} \quad \_ \quad \textbackslash 
\end{minipage}

可以用没有字母的重音\verb|\~{}| 和 \verb|\^{}| 输出 \~{} 和 \^{} ，但这两个符号一般不直接在普通正文中出现，而出现其他地方：可以是重音符号；可以出现在程序代码中；此外还有一个数学符号 $\sim$。

符号

| \quad < \quad > \quad + \quad =

虽然可以接受，但它们一般用在数学公式中，其文本形式的效果不好或有错，一般不直接使用它们。键盘上的双引号 \verb|"| 一般也极少使用在正文中，而常被另外定义移作他用。

中文使用的标点与西文标点不同 中文写作使用全角标点：

\begin{table}[H]
    \centering
    \begin{tabular}{ccccccccccc}
        句号 & 。或\ . & &
        逗号 & ， & &
        顿号 & 、& &
        分号 & ； \\
        冒号 & ： &&
        问号 & ？ &&
        感叹号 & ! &&
        间隔号 & · \\ 
        单引号 & ‘ \quad ’ &&
        双引号 & “ \quad ” &&
        单书名号 & <\quad  > &&
        双书名号 & 《\quad 》 \\
        括号 & () [] ﹝﹞ &&
        省略号 & …… && 
        破折号 & —— 
    \end{tabular}
\end{table}

在计算机中使用中文输入法录入全角标点通常是很直接的。特别需要说明的是破折号（ —— ）和 省略号 （……），它们都占两个中文字符，在大部分输入法中可以使用 \verb|Shift+-| 和 \verb|Shift+6| 得到。

在科技文章中，为与数字、字母区分，中文的句号一般也用一个圆点表示，此时应该使用全角的“.” 而非混用西文句点。这个标点在大部分中文输入法下可能不易输入，可以先统一使用句号“。”，最后统一替换。

也有一种科技文章的写作风格，是中文与西文统一使用西文的标点，只有顿号、破折号和省略号仍用中文标点。但这样可能造成标点大小、位置与汉字对不准，以及字体风格的不统一，应该小心使用。

\LaTeX 并不会自动处理好汉字标点的宽度和间距，甚至不能保证标点的禁则（如句号不允许出现在一行的开始）。使用 XeTeX 作为排版引擎时，中文标点一般是由 xeCJK 宏包控制的。 xeCJK 提供了多种标点格式，默认是全角式，即所有标点占一个汉字宽度，只有在行末或个别标点之间进行标点挤压。还支持其他一些标点格式，可以使用\verb|\punctstyle| 命令修改：

\begin{center}
    \includegraphics[width=0.6\textwidth]{标点形式.png} \centering
\end{center}